---
import Layout from '../layouts/layout.astro';
import RatesTable from '../components/rates-table.astro';
import { fetchRates } from '../ts/API/useRates';
import { Schema } from 'astro-seo-schema';

const { rates, lastUpdate } = await fetchRates();

const pageData = {
  title: 'Kursna Lista | Menjačnica Genes Novi Sad',
  description:
    'Ažurirana kursna lista sa kupovnim i prodajnim kursevima za evro (EUR), dolar (USD), franak (CHF), funtu (GBP), australijski (AUD) i kanadski dolar (CAD), kao i konvertibilnu marku (BAM).',
  ogImage: '/images/GenesLogoMeta.webp',
  lang: 'sr',
  ratesTable: {
    rates: rates,
    lastUpdate: lastUpdate,
    lastUpdateText: 'Poslednji put ažurirano:',
    disclaimer: 'Kursevi su informativnog karaktera i podložni su promenama.',
    buyLabel: 'Kupovni',
    sellLabel: 'Prodajni',
    dayLabel: 'Danas',
    weekLabel: 'Ove nedelje',
    monthLabel: 'Ovog meseca',
    yearLabel: 'Ove godine',
    backButton: 'Vrati se nazad',
    currencyLabel: 'Valuta',
  },
};
---

<Layout
  title={pageData.title}
  description={pageData.description}
  ogImage="/images/GenesLogoMeta.webp"
  lang="sr"
>
  <Schema
    item={{
      '@context': 'https://schema.org',
      '@graph': [
        {
          '@type': 'WebPage',
          '@id': 'https://menjacnicagenes.rs/kursna-lista/#webpage',
          url: 'https://menjacnicagenes.rs/kursna-lista',
          name: pageData.title,
          description: pageData.description,
          inLanguage: 'sr-RS',
          isPartOf: { '@id': 'https://menjacnicagenes.rs/#website' },
        },
        {
          '@type': 'BreadcrumbList',
          '@id': 'https://menjacnicagenes.rs/kursna-lista/#breadcrumb',
          itemListElement: [
            {
              '@type': 'ListItem',
              position: 1,
              name: 'Početna',
              item: 'https://menjacnicagenes.rs',
            },
            {
              '@type': 'ListItem',
              position: 2,
              name: 'Kursna Lista',
              item: 'https://menjacnicagenes.rs/kursna-lista',
            },
          ],
        },
      ],
    }}
  />
  <main class="exchange-rates">
    <RatesTable
      rates={pageData.ratesTable.rates}
      lastUpdate={pageData.ratesTable.lastUpdate}
      lastUpdateText={pageData.ratesTable.lastUpdateText}
      disclaimer={pageData.ratesTable.disclaimer}
      buyLabel={pageData.ratesTable.buyLabel}
      sellLabel={pageData.ratesTable.sellLabel}
      dayLabel={pageData.ratesTable.dayLabel}
      weekLabel={pageData.ratesTable.weekLabel}
      monthLabel={pageData.ratesTable.monthLabel}
      yearLabel={pageData.ratesTable.yearLabel}
      backButton={pageData.ratesTable.backButton}
      currencyLabel={pageData.ratesTable.currencyLabel}
    />
  </main>
</Layout>
