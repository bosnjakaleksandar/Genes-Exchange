---
import Layout from '../layouts/layout.astro';
import RatesTable from '../components/rates-table.astro';
import { fetchRates } from '../ts/API/useRates';

const { rates, lastUpdate } = await fetchRates();

const pageData = {
  title: 'Menja훾nica Genes - Kursna Lista',
  description:
    'A탑urirana kursna lista sa kupovnim i prodajnim kursevima za evro (EUR), dolar (USD), franak (CHF), funtu (GBP), australijski (AUD) i kanadski dolar (CAD), kao i konvertibilnu marku (BAM).',
  ogImage: '/images/kursna-lista-og-image.webp',
  lang: 'sr',
  ratesTable: {
    rates: rates,
    lastUpdate: lastUpdate,
    lastUpdateText: 'Poslednji put a탑urirano:',
    disclaimer: 'Kursevi su informativnog karaktera i podlo탑ni su promenama.',
    buyLabel: 'Kupovni',
    sellLabel: 'Prodajni',
    dayLabel: 'Danas',
    weekLabel: 'Ove nedelje',
    monthLabel: 'Ovog meseca',
    yearLabel: 'Ove godine',
    backButton: 'Vrati se nazad',
    currencyLabel: 'Valuta',
  },
};

const ratesSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebPage',
  name: pageData.title,
  description: pageData.description,
  lastReviewed: new Date().toISOString(),
  mainEntity: {
    '@type': 'Table',
    about: 'Kursna lista valuta',
  },
};
---

<Layout
  title={pageData.title}
  description={pageData.description}
  ogImage="/images/HeroBanner.webp"
  lang="sr"
>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(ratesSchema)} />
  </Fragment>
  <main class="exchange-rates">
    <RatesTable
      rates={pageData.ratesTable.rates}
      lastUpdate={pageData.ratesTable.lastUpdate}
      lastUpdateText={pageData.ratesTable.lastUpdateText}
      disclaimer={pageData.ratesTable.disclaimer}
      buyLabel={pageData.ratesTable.buyLabel}
      sellLabel={pageData.ratesTable.sellLabel}
      dayLabel={pageData.ratesTable.dayLabel}
      weekLabel={pageData.ratesTable.weekLabel}
      monthLabel={pageData.ratesTable.monthLabel}
      yearLabel={pageData.ratesTable.yearLabel}
      backButton={pageData.ratesTable.backButton}
      currencyLabel={pageData.ratesTable.currencyLabel}
    />
  </main>
</Layout>
