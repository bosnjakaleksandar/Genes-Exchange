---
import Layout from '../layouts/layout.astro';
import RatesTable from '../components/rates-table.astro';
import { fetchRates } from '../ts/API/useRates';

const pageData = {
  title: 'Kursna Lista',
  description:
    'Trenutni kursevi valuta u menja훾nici Genes Novi Sad. Kupovni i prodajni kursevi za EUR, USD, CHF, AUD, CAD, GBP i BAM.',
};

// Fetch all rates
const { rates, lastUpdate } = await fetchRates();

// Structured data for exchange rates
const ratesSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebPage',
  name: pageData.title,
  description: pageData.description,
  lastReviewed: new Date().toISOString(),
  mainEntity: {
    '@type': 'Table',
    about: 'Kursna lista valuta',
  },
};
---

<Layout
  title={pageData.title + ' - Menja훾nica Genes'}
  description={pageData.description}
  ogImage="/images/HeroBanner.webp"
  lang="sr"
>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(ratesSchema)} />
  </Fragment>
  <main class="exchange-rates">
    <RatesTable
      rates={rates}
      lastUpdate={lastUpdate}
      lastUpdateText="Poslednji put a탑urirano:"
      disclaimer="Kursevi su informativnog karaktera i podlo탑ni su promenama."
      buyLabel="Kupovni"
      sellLabel="Prodajni"
      dayLabel="Danas"
      weekLabel="Ove nedelje"
      monthLabel="Ovog meseca"
      yearLabel="Ove godine"
      backButton="Vrati se nazad"
      currencyLabel="Valuta"
    />
  </main>
</Layout>
