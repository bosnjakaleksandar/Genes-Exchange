---
import Layout from '../layouts/layout.astro';
import RatesTable from '../components/rates-table.astro';
import { fetchRates } from '../ts/API/useRates';

const pageData = {
  title: 'Kursna Lista',
  description:
    'Trenutni kursevi valuta u menjačnici Genes Novi Sad. Kupovni i prodajni kursevi za EUR, USD, CHF, GBP i druge valute.',
};

// Fetch all rates
const { rates, lastUpdate } = await fetchRates();

// Structured data for exchange rates
const ratesSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebPage',
  name: pageData.title,
  description: pageData.description,
  lastReviewed: new Date().toISOString(),
  mainEntity: {
    '@type': 'Table',
    about: 'Kursna lista valuta',
  },
};
---

<Layout
  title={pageData.title + ' | Menjačnica Genes'}
  description={pageData.description}
  ogImage="/images/HeroBanner.webp"
>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(ratesSchema)} />
  </Fragment>
  <main class="exchange-rates">
    <RatesTable rates={rates} lastUpdate={lastUpdate} />
  </main>
</Layout>
