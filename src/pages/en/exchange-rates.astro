---
import Layout from '../../layouts/layout.astro';
import RatesTable from '../../components/rates-table.astro';
import { fetchRates } from '../../ts/API/useRates';

const pageData = {
  title: 'Exchange Rates',
  description:
    'Updated exchange rates with buying and selling prices for Euro (EUR), Dollar (USD), Franc (CHF), British Pound (GBP), Australian (AUD) and Canadian Dollar (CAD), as well as Convertible Mark (BAM). View current currency rates in one place and track changes in real time.',
};

// Fetch all rates
const { rates, lastUpdate } = await fetchRates();

// Structured data for exchange rates
const ratesSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebPage',
  name: pageData.title,
  description: pageData.description,
  lastReviewed: new Date().toISOString(),
  mainEntity: {
    '@type': 'Table',
    about: 'Currency exchange rates',
  },
};
---

<Layout
  title={pageData.title + ' - Genes Exchange Office Novi Sad'}
  description={pageData.description}
  ogImage="/images/HeroBanner.webp"
  lang="en"
>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(ratesSchema)} />
  </Fragment>
  <main class="exchange-rates">
    <RatesTable
      rates={rates}
      lastUpdate={lastUpdate}
      lastUpdateText="Last updated:"
      disclaimer="Rates are for informational purposes only and are subject to change."
      buyLabel="Buy"
      sellLabel="Sell"
      dayLabel="Today"
      weekLabel="This week"
      monthLabel="This month"
      yearLabel="This year"
      backButton="Go back"
      currencyLabel="Currency"
    />
  </main>
</Layout>
