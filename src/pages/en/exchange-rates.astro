---
import Layout from '../../layouts/layout.astro';
import RatesTable from '../../components/rates-table.astro';
import { fetchRates } from '../../ts/API/useRates';

const pageData = {
  title: 'Exchange Rates',
  description:
    'Current currency exchange rates at Genes Exchange Novi Sad. Buy and sell rates for EUR, USD, CHF, AUD, CAD, GBP and BAM.',
};

// Fetch all rates
const { rates, lastUpdate } = await fetchRates();

// Structured data for exchange rates
const ratesSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebPage',
  name: pageData.title,
  description: pageData.description,
  lastReviewed: new Date().toISOString(),
  mainEntity: {
    '@type': 'Table',
    about: 'Currency exchange rates',
  },
};
---

<Layout
  title={pageData.title + ' - Genes Exchange Office'}
  description={pageData.description}
  ogImage="/images/HeroBanner.webp"
  lang="en"
>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(ratesSchema)} />
  </Fragment>
  <main class="exchange-rates">
    <RatesTable rates={rates} lastUpdate={lastUpdate} />
  </main>
</Layout>
