---
import Layout from '../layouts/layout.astro';
import Hero from '../components/hero.astro';
import Info from '../components/info.astro';
import Calculator from '../components/calculator.astro';
import { fetchRates } from '../ts/API/useRates';
import moneyExchange from '../assets/money-exchange.webp';
import payspotInvoices from '../assets/payspot-invoices.webp';
import lutrija from '../assets/lutrija.webp';
import About from '../components/about.astro';
import Accordion from '../components/accordion.astro';
import { Schema } from 'astro-seo-schema';

const { rates, lastUpdate } = await fetchRates();
const eurRate = rates.find((rate) => rate.currency === 'EUR');

const pageData = {
  title: 'Menjačnica Genes Novi Sad',
  description:
    'Menjačnica Genes Novi Sad je Vaša pouzdana menjačnica za razmenu valuta, uplatu računa, osiguranja, komunalija. Sigurno, brzo i jednostavno. Već više od 10 godina sa Vama. Posetite nas na adresi Hajduk Veljkova 11, Novi Sad na novosadskom sajmu.',
  hero: {
    title: 'Menjačnica Genes Novi Sad',
    description: 'Vaš pouzdan partner za razmenu valuta i finansijske usluge.',
    buttonText: 'Kursna lista',
    buttonLink: '/kursna-lista',
    buttonIcon: 'arrow-right',
    currency: 'Kurs evra',
    updateText: 'Poslednji put ažurirano',
  },
  about: {
    title: 'O nama',
    linkText: 'Lokacija na mapi',
    strong: 'Menjačnica Genes',
    description:
      'se nalazi u Novom Sadu, na adresi Hajduk Veljkova 11, u blizini službenog ulaza 2 Novosadskog sajma. Pružamo usluge zamene valuta po povoljnim i transparentnim kursnim uslovima, usluge platnog prometa u saradnji sa platnom institucijom PaySpot, kao i igre na sreću Državne lutrije Srbije. Ako tražite pouzdanu menjačnicu u Novom Sadu, naš tim vam stoji na raspolaganju svakog radnog dana.',
  },
  services: [
    {
      title: 'Menjački poslovi',
      description:
        'Nudimo otkup, prodaju i konverziju efektivnog stranog novca, uz mogućnost ugovaranja stimulativnog kursa za veće transakcije.',
      imageAlt: 'money-exchange',
      imageSrc: moneyExchange,
      reverse: false,
    },
    {
      title: 'Platni promet',
      description:
        'Usluge platnog prometa (Uplata računa, komunalija, osiguranja, pazara...) vršimo u saradnji sa Payspot-om. A za precizne informacije o naknadama posetite Payspot web stranicu.',
      imageSrc: payspotInvoices,
      imageAlt: 'payspot-invoices',
      reverse: true,
      buttons: [
        {
          text: 'Posetite Payspot',
          href: 'https://www.payspot.rs/',
          target: '_blank' as '_blank',
          icon: 'arrow-right',
        },
        {
          text: 'Kalkulator naknada',
          href: 'https://www.payspot.rs/kalkulator',
          target: '_blank' as '_blank',
          icon: 'arrow-right',
        },
      ],
    },
    {
      title: 'Državna Lutrija Srbije',
      description:
        'Uplatite svoj listić za Loto ili Bingo, ogrebite srećku ili učestvujte u nenoj od igara Državne lutrije Srbije. Možda ste baš vi sledeći dobitnik! Samo za lica starija od 18 godina.',
      imageSrc: lutrija,
      imageAlt: 'lutrija',
      reverse: false,
    },
  ],
  accordion: {
    title: 'Najčešće postavljana pitanja',
    buttonText: 'Pogledajte sva pitanja',
    buttonLink: '/cesta-pitanja',
    faqs: [
      {
        question: 'Koje je radno vreme menjačnice?',
        answer:
          'Naša menjačnica radi od ponedeljka do petka od 08:30 do 17:00, subotom od 08:30 do 14:00, dok je nedeljom zatvorena.',
      },
      {
        question: 'Da li naplaćujete proviziju za razmenu valuta?',
        answer:
          'Ne, ne naplaćujemo proviziju za razmenu valuta. Naši kursevi su transparentni bez skrivenih troškova.',
      },
      {
        question: 'Koliko traje obrada platnog naloga?',
        answer:
          'Platni nalozi primljeni radnim danom do 16:30 izvršavaju se istog dana, dok će uplate primljene nakon toga biti izvršene sledećeg radnog dana.',
      },
    ],
  },
};
---

<Layout
  title={pageData.title}
  description={pageData.description}
  ogImage="/images/GenesLogoMeta.webp"
  lang="sr"
>
  <Schema
    item={{
      '@context': 'https://schema.org',
      '@graph': [
        {
          '@type': 'LocalBusiness',
          '@id': 'https://menjacnicagenes.rs/#organization',
          name: 'Menjačnica Genes',
          alternateName: 'Genes Exchange Office',
          url: 'https://menjacnicagenes.rs',
          logo: 'https://menjacnicagenes.rs/images/GenesLogoMeta.webp',
          image: 'https://menjacnicagenes.rs/images/GenesLogoMeta.webp',
          description: pageData.description,
          email: 'menjacnicagenes@gmail.com',
          address: {
            '@type': 'PostalAddress',
            streetAddress: 'Hajduk Veljkova 11',
            addressLocality: 'Novi Sad',
            postalCode: '21000',
            addressCountry: 'RS',
          },
          geo: {
            '@type': 'GeoCoordinates',
            latitude: 45.258443638398376,
            longitude: 19.82320808465672,
          },
          openingHoursSpecification: [
            {
              '@type': 'OpeningHoursSpecification',
              dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
              opens: '08:30',
              closes: '17:00',
            },
            {
              '@type': 'OpeningHoursSpecification',
              dayOfWeek: 'Saturday',
              opens: '08:30',
              closes: '14:00',
            },
          ],
          areaServed: {
            '@type': 'City',
            name: 'Novi Sad',
          },
          priceRange: '$$',
          currenciesAccepted: 'EUR, USD, CHF, AUD, CAD, GBP, BAM, RSD',
          paymentAccepted: 'Cash',
        },
        {
          '@type': 'WebSite',
          '@id': 'https://menjacnicagenes.rs/#website',
          url: 'https://menjacnicagenes.rs',
          name: 'Menjačnica Genes',
          publisher: { '@id': 'https://menjacnicagenes.rs/#organization' },
          inLanguage: 'sr-RS',
          potentialAction: {
            '@type': 'SearchAction',
            target: {
              '@type': 'EntryPoint',
              urlTemplate: 'https://menjacnicagenes.rs/kursna-lista?q={search_term_string}',
            },
            // @ts-ignore
            'query-input': 'required name=search_term_string',
          },
        },
        {
          '@type': 'WebPage',
          '@id': 'https://menjacnicagenes.rs/#webpage',
          url: 'https://menjacnicagenes.rs',
          name: pageData.title,
          isPartOf: { '@id': 'https://menjacnicagenes.rs/#website' },
          about: { '@id': 'https://menjacnicagenes.rs/#organization' },
          description: pageData.description,
          inLanguage: 'sr-RS',
        },
        {
          '@type': 'FAQPage',
          '@id': 'https://menjacnicagenes.rs/#faq',
          isPartOf: { '@id': 'https://menjacnicagenes.rs/#webpage' },
          mainEntity: pageData.accordion.faqs.map((faq) => ({
            '@type': 'Question',
            name: faq.question,
            acceptedAnswer: {
              '@type': 'Answer',
              text: faq.answer,
            },
          })),
        },
      ],
    }}
  />

  <main class="homepage">
    <Hero
      title={pageData.hero.title}
      description={pageData.hero.description}
      buttonText={pageData.hero.buttonText}
      buttonHref={pageData.hero.buttonLink}
      buttonIcon={pageData.hero.buttonIcon}
      currency={pageData.hero.currency}
      updateText={pageData.hero.updateText}
      eurRate={eurRate}
      lastUpdate={lastUpdate}
    />
    <About
      title={pageData.about.title}
      linkText={pageData.about.linkText}
      strong={pageData.about.strong}
      description={pageData.about.description}
    />
    <Calculator lang="sr" />
    {
      pageData.services.map((service) => (
        <Info
          title={service.title}
          description={service.description}
          imageAlt={service.imageAlt}
          imageSrc={service.imageSrc}
          reverse={service.reverse}
          buttons={service.buttons}
        />
      ))
    }
    <Accordion
      title={pageData.accordion.title}
      questions={pageData.accordion.faqs}
      buttonLink={pageData.accordion.buttonLink}
      buttonText={pageData.accordion.buttonText}
    />
  </main>
</Layout>
